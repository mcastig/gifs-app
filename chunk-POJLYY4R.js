import{H as g,J as h,O as m,a as f,b as c,db as p,eb as y,fa as r,o as a,pb as l}from"./chunk-76RC743J.js";var o={production:!0,companyName:"Gifs",companyLastName:"App",companySlogan:"Manage your gifs",giphyApiKey:"0kdkz6VBzUNhjmMOAALlvBIRu3vNnk04",giphyUrl:"https://api.giphy.com/v1"};var n=class{static mapGiphyItemToGif(i){return{id:i.id,title:i.title,url:i.images.original.url}}static mapGiphyItemsToGifArray(i){return i.map(this.mapGiphyItemToGif)}};var d="gifs",u=()=>{let e=localStorage.getItem(d)??"{}";return JSON.parse(e)},G=class e{http=m(l);trendingGifs=r([]);trendingGifsLoading=r(!1);trendingPage=r(0);trendingGifGroup=p(()=>{let i=[];for(let t=0;t<this.trendingGifs().length;t+=3)i.push(this.trendingGifs().slice(t,t+3));return i});searchingGifsLoading=r(!0);searchHistory=r(u());searchHistoryKeys=p(()=>Object.keys(this.searchHistory()));constructor(){this.loadTrendingGifs()}saveGifsToLocalStorage=y(()=>{let i=JSON.stringify(this.searchHistory());localStorage.setItem(d,i)});loadTrendingGifs(){this.trendingGifsLoading()||(this.trendingGifsLoading.set(!0),this.http.get(`${o.giphyUrl}/gifs/trending`,{params:{api_key:o.giphyApiKey,limit:20,offset:this.trendingPage()*20}}).subscribe(i=>{let t=n.mapGiphyItemsToGifArray(i.data);this.trendingGifs.update(s=>[...s,...t]),this.trendingGifsLoading.set(!1),this.trendingPage.update(s=>s+1)}))}searchGifs(i){return this.http.get(`${o.giphyUrl}/gifs/search`,{params:{api_key:o.giphyApiKey,limit:20,q:i}}).pipe(a(({data:t})=>t),a(t=>n.mapGiphyItemsToGifArray(t)),g(t=>{this.searchHistory.update(s=>c(f({},s),{[i.toLocaleLowerCase()]:t}))}))}getHistoryGifs(i){return this.searchHistory()[i]??[]}static \u0275fac=function(t){return new(t||e)};static \u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"})};export{o as a,G as b};
